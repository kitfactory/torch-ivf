<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" width="900" height="520" viewBox="0 0 900 520">
  <rect x="0" y="0" width="900" height="520" fill="#ffffff"/>

  <!-- Title -->
  <text x="450" y="30" text-anchor="middle" font-family="system-ui, -apple-system, Segoe UI, sans-serif" font-size="18" fill="#111111">
    QPS vs nq (ROCm GPU: torch-ivf matrix/csr/auto)
  </text>
  <text x="450" y="52" text-anchor="middle" font-family="system-ui, -apple-system, Segoe UI, sans-serif" font-size="12" fill="#444444">
    nb=262144, train_n=20480, nlist=512, nprobe=32, k=20, float32 (median)
  </text>

  <!-- Plot area -->
  <rect x="70" y="70" width="810" height="380" fill="#ffffff" stroke="#cccccc" stroke-width="1"/>

  <!-- Grid + Y ticks (0..70000 step 10000) -->
  <!-- y = 70 + (1 - v/70000) * 380 -->
  <g font-family="system-ui, -apple-system, Segoe UI, sans-serif" font-size="12" fill="#333333">
    <line x1="70" y1="70.000" x2="880" y2="70.000" stroke="#eeeeee" stroke-width="1"/>
    <text x="62" y="74.000" text-anchor="end">70000</text>
    <line x1="70" y1="124.286" x2="880" y2="124.286" stroke="#eeeeee" stroke-width="1"/>
    <text x="62" y="128.286" text-anchor="end">60000</text>
    <line x1="70" y1="178.571" x2="880" y2="178.571" stroke="#eeeeee" stroke-width="1"/>
    <text x="62" y="182.571" text-anchor="end">50000</text>
    <line x1="70" y1="232.857" x2="880" y2="232.857" stroke="#eeeeee" stroke-width="1"/>
    <text x="62" y="236.857" text-anchor="end">40000</text>
    <line x1="70" y1="287.143" x2="880" y2="287.143" stroke="#eeeeee" stroke-width="1"/>
    <text x="62" y="291.143" text-anchor="end">30000</text>
    <line x1="70" y1="341.429" x2="880" y2="341.429" stroke="#eeeeee" stroke-width="1"/>
    <text x="62" y="345.429" text-anchor="end">20000</text>
    <line x1="70" y1="395.714" x2="880" y2="395.714" stroke="#eeeeee" stroke-width="1"/>
    <text x="62" y="399.714" text-anchor="end">10000</text>
    <line x1="70" y1="450.000" x2="880" y2="450.000" stroke="#eeeeee" stroke-width="1"/>
    <text x="62" y="454.000" text-anchor="end">0</text>
  </g>

  <!-- X ticks (even spacing for nq list indices) -->
  <!-- x positions: 70 + i*(810/6) -->
  <g font-family="system-ui, -apple-system, Segoe UI, sans-serif" font-size="12" fill="#333333">
    <line x1="70.000" y1="450" x2="70.000" y2="456" stroke="#666666"/>
    <text x="70.000" y="476" text-anchor="middle">1</text>
    <line x1="205.000" y1="450" x2="205.000" y2="456" stroke="#666666"/>
    <text x="205.000" y="476" text-anchor="middle">8</text>
    <line x1="340.000" y1="450" x2="340.000" y2="456" stroke="#666666"/>
    <text x="340.000" y="476" text-anchor="middle">32</text>
    <line x1="475.000" y1="450" x2="475.000" y2="456" stroke="#666666"/>
    <text x="475.000" y="476" text-anchor="middle">128</text>
    <line x1="610.000" y1="450" x2="610.000" y2="456" stroke="#666666"/>
    <text x="610.000" y="476" text-anchor="middle">512</text>
    <line x1="745.000" y1="450" x2="745.000" y2="456" stroke="#666666"/>
    <text x="745.000" y="476" text-anchor="middle">2048</text>
    <line x1="880.000" y1="450" x2="880.000" y2="456" stroke="#666666"/>
    <text x="880.000" y="476" text-anchor="middle">19600</text>
  </g>

  <!-- Axis labels -->
  <text x="475" y="510" text-anchor="middle" font-family="system-ui, -apple-system, Segoe UI, sans-serif" font-size="13" fill="#111111">nq</text>
  <text x="18" y="260" text-anchor="middle" font-family="system-ui, -apple-system, Segoe UI, sans-serif" font-size="13" fill="#111111" transform="rotate(-90 18 260)">QPS</text>

  <!-- Data -->
  <!-- torch-ivf matrix (#1f77b4): [992.753, 2530.925, 2919.468, 3322.251, 3424.983, 3338.259, 3531.486] -->
  <!-- torch-ivf csr (#d00000): [990.688, 2543.478, 1914.242, 7094.243, 25746.886, 37339.761, 63079.137] -->
  <!-- torch-ivf auto (#2ca02c): [1043.841, 2525.093, 3194.41, 7235.808, 25561.785, 39695.077, 63015.518] -->
  <!-- y = 70 + (1 - v/70000) * 380 -->

  <!-- Lines -->
  <polyline fill="none" stroke="#1f77b4" stroke-width="2.5"
    points="
      70.000,444.611
      205.000,436.261
      340.000,434.151
      475.000,431.965
      610.000,431.407
      745.000,431.878
      880.000,430.829
    "/>
  <polyline fill="none" stroke="#d00000" stroke-width="2.5"
    points="
      70.000,444.622
      205.000,436.193
      340.000,439.608
      475.000,411.488
      610.000,310.231
      745.000,247.298
      880.000,107.570
    "/>
  <polyline fill="none" stroke="#2ca02c" stroke-width="2.5"
    points="
      70.000,444.333
      205.000,436.292
      340.000,432.659
      475.000,410.720
      610.000,311.236
      745.000,234.512
      880.000,107.916
    "/>

  <!-- Markers -->
  <g>
    <circle cx="70.000" cy="444.611" r="3.5" fill="#1f77b4"/>
    <circle cx="205.000" cy="436.261" r="3.5" fill="#1f77b4"/>
    <circle cx="340.000" cy="434.151" r="3.5" fill="#1f77b4"/>
    <circle cx="475.000" cy="431.965" r="3.5" fill="#1f77b4"/>
    <circle cx="610.000" cy="431.407" r="3.5" fill="#1f77b4"/>
    <circle cx="745.000" cy="431.878" r="3.5" fill="#1f77b4"/>
    <circle cx="880.000" cy="430.829" r="3.5" fill="#1f77b4"/>
    <circle cx="70.000" cy="444.622" r="3.5" fill="#d00000"/>
    <circle cx="205.000" cy="436.193" r="3.5" fill="#d00000"/>
    <circle cx="340.000" cy="439.608" r="3.5" fill="#d00000"/>
    <circle cx="475.000" cy="411.488" r="3.5" fill="#d00000"/>
    <circle cx="610.000" cy="310.231" r="3.5" fill="#d00000"/>
    <circle cx="745.000" cy="247.298" r="3.5" fill="#d00000"/>
    <circle cx="880.000" cy="107.570" r="3.5" fill="#d00000"/>
    <circle cx="70.000" cy="444.333" r="3.5" fill="#2ca02c"/>
    <circle cx="205.000" cy="436.292" r="3.5" fill="#2ca02c"/>
    <circle cx="340.000" cy="432.659" r="3.5" fill="#2ca02c"/>
    <circle cx="475.000" cy="410.720" r="3.5" fill="#2ca02c"/>
    <circle cx="610.000" cy="311.236" r="3.5" fill="#2ca02c"/>
    <circle cx="745.000" cy="234.512" r="3.5" fill="#2ca02c"/>
    <circle cx="880.000" cy="107.916" r="3.5" fill="#2ca02c"/>
  </g>

  <!-- Legend -->
  <g font-family="system-ui, -apple-system, Segoe UI, sans-serif" font-size="12">
    <rect x="580" y="82" width="290" height="62" fill="#ffffff" stroke="#dddddd"/>
    <line x1="594" y1="98" x2="630" y2="98" stroke="#1f77b4" stroke-width="2.5"/>
    <text x="640" y="102" fill="#111111">torch-ivf (ROCm GPU, matrix)</text>
    <line x1="594" y1="116" x2="630" y2="116" stroke="#d00000" stroke-width="2.5"/>
    <text x="640" y="120" fill="#111111">torch-ivf (ROCm GPU, csr)</text>
    <line x1="594" y1="134" x2="630" y2="134" stroke="#2ca02c" stroke-width="2.5"/>
    <text x="640" y="138" fill="#111111">torch-ivf (ROCm GPU, auto)</text>
  </g>
</svg>
