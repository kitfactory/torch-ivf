<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" width="900" height="520" viewBox="0 0 900 520">
  <rect x="0" y="0" width="900" height="520" fill="#ffffff"/>

  <!-- Title -->
  <text x="450" y="30" text-anchor="middle" font-family="system-ui, -apple-system, Segoe UI, sans-serif" font-size="18" fill="#111111">
    QPS vs nq (ROCm GPU: torch-ivf matrix/csr/auto)
  </text>
  <text x="450" y="52" text-anchor="middle" font-family="system-ui, -apple-system, Segoe UI, sans-serif" font-size="12" fill="#444444">
    nb=262144, train_n=20480, nlist=512, nprobe=32, k=20, float32 (median)
  </text>

  <!-- Plot area -->
  <rect x="70" y="70" width="810" height="380" fill="#ffffff" stroke="#cccccc" stroke-width="1"/>

  <!-- Grid + Y ticks (0..70000 step 10000) -->
  <!-- y = 70 + (1 - v/70000) * 380 -->
  <g font-family="system-ui, -apple-system, Segoe UI, sans-serif" font-size="12" fill="#333333">
    <line x1="70" y1="70.000" x2="880" y2="70.000" stroke="#eeeeee" stroke-width="1"/>
    <text x="62" y="74.000" text-anchor="end">70000</text>
    <line x1="70" y1="124.286" x2="880" y2="124.286" stroke="#eeeeee" stroke-width="1"/>
    <text x="62" y="128.286" text-anchor="end">60000</text>
    <line x1="70" y1="178.571" x2="880" y2="178.571" stroke="#eeeeee" stroke-width="1"/>
    <text x="62" y="182.571" text-anchor="end">50000</text>
    <line x1="70" y1="232.857" x2="880" y2="232.857" stroke="#eeeeee" stroke-width="1"/>
    <text x="62" y="236.857" text-anchor="end">40000</text>
    <line x1="70" y1="287.143" x2="880" y2="287.143" stroke="#eeeeee" stroke-width="1"/>
    <text x="62" y="291.143" text-anchor="end">30000</text>
    <line x1="70" y1="341.429" x2="880" y2="341.429" stroke="#eeeeee" stroke-width="1"/>
    <text x="62" y="345.429" text-anchor="end">20000</text>
    <line x1="70" y1="395.714" x2="880" y2="395.714" stroke="#eeeeee" stroke-width="1"/>
    <text x="62" y="399.714" text-anchor="end">10000</text>
    <line x1="70" y1="450.000" x2="880" y2="450.000" stroke="#eeeeee" stroke-width="1"/>
    <text x="62" y="454.000" text-anchor="end">0</text>
  </g>

  <!-- X ticks (even spacing for nq list indices) -->
  <!-- x positions: 70 + i*(810/6) -->
  <g font-family="system-ui, -apple-system, Segoe UI, sans-serif" font-size="12" fill="#333333">
    <line x1="70.000" y1="450" x2="70.000" y2="456" stroke="#666666"/>
    <text x="70.000" y="476" text-anchor="middle">1</text>
    <line x1="205.000" y1="450" x2="205.000" y2="456" stroke="#666666"/>
    <text x="205.000" y="476" text-anchor="middle">8</text>
    <line x1="340.000" y1="450" x2="340.000" y2="456" stroke="#666666"/>
    <text x="340.000" y="476" text-anchor="middle">32</text>
    <line x1="475.000" y1="450" x2="475.000" y2="456" stroke="#666666"/>
    <text x="475.000" y="476" text-anchor="middle">128</text>
    <line x1="610.000" y1="450" x2="610.000" y2="456" stroke="#666666"/>
    <text x="610.000" y="476" text-anchor="middle">512</text>
    <line x1="745.000" y1="450" x2="745.000" y2="456" stroke="#666666"/>
    <text x="745.000" y="476" text-anchor="middle">2048</text>
    <line x1="880.000" y1="450" x2="880.000" y2="456" stroke="#666666"/>
    <text x="880.000" y="476" text-anchor="middle">19600</text>
  </g>

  <!-- Axis labels -->
  <text x="475" y="510" text-anchor="middle" font-family="system-ui, -apple-system, Segoe UI, sans-serif" font-size="13" fill="#111111">nq</text>
  <text x="18" y="260" text-anchor="middle" font-family="system-ui, -apple-system, Segoe UI, sans-serif" font-size="13" fill="#111111" transform="rotate(-90 18 260)">QPS</text>

  <!-- Data -->
  <!-- torch-ivf matrix (#1f77b4): [784.56, 2531.806, 2927.4, 3275.073, 3456.832, 3385.258, 3291.883] -->
  <!-- torch-ivf csr (#d00000): [886.525, 2592.101, 1107.312, 4431.98, 16250.718, 37391.914, 69206.718] -->
  <!-- torch-ivf auto (#2ca02c): [882.457, 2405.364, 3074.026, 4477.889, 16077.928, 36831.286, 69632.119] -->
  <!-- y = 70 + (1 - v/70000) * 380 -->

  <!-- Lines -->
  <polyline fill="none" stroke="#1f77b4" stroke-width="2.5"
    points="
      70.000,445.741
      205.000,436.256
      340.000,434.108
      475.000,432.221
      610.000,431.234
      745.000,431.623
      880.000,432.130
    "/>
  <polyline fill="none" stroke="#d00000" stroke-width="2.5"
    points="
      70.000,445.187
      205.000,435.929
      340.000,443.989
      475.000,425.941
      610.000,361.782
      745.000,247.015
      880.000,74.306
    "/>
  <polyline fill="none" stroke="#2ca02c" stroke-width="2.5"
    points="
      70.000,445.210
      205.000,436.942
      340.000,433.312
      475.000,425.691
      610.000,362.720
      745.000,250.059
      880.000,71.997
    "/>

  <!-- Markers -->
  <g>
    <circle cx="70.000" cy="445.741" r="3.5" fill="#1f77b4"/>
    <circle cx="205.000" cy="436.256" r="3.5" fill="#1f77b4"/>
    <circle cx="340.000" cy="434.108" r="3.5" fill="#1f77b4"/>
    <circle cx="475.000" cy="432.221" r="3.5" fill="#1f77b4"/>
    <circle cx="610.000" cy="431.234" r="3.5" fill="#1f77b4"/>
    <circle cx="745.000" cy="431.623" r="3.5" fill="#1f77b4"/>
    <circle cx="880.000" cy="432.130" r="3.5" fill="#1f77b4"/>
    <circle cx="70.000" cy="445.187" r="3.5" fill="#d00000"/>
    <circle cx="205.000" cy="435.929" r="3.5" fill="#d00000"/>
    <circle cx="340.000" cy="443.989" r="3.5" fill="#d00000"/>
    <circle cx="475.000" cy="425.941" r="3.5" fill="#d00000"/>
    <circle cx="610.000" cy="361.782" r="3.5" fill="#d00000"/>
    <circle cx="745.000" cy="247.015" r="3.5" fill="#d00000"/>
    <circle cx="880.000" cy="74.306" r="3.5" fill="#d00000"/>
    <circle cx="70.000" cy="445.210" r="3.5" fill="#2ca02c"/>
    <circle cx="205.000" cy="436.942" r="3.5" fill="#2ca02c"/>
    <circle cx="340.000" cy="433.312" r="3.5" fill="#2ca02c"/>
    <circle cx="475.000" cy="425.691" r="3.5" fill="#2ca02c"/>
    <circle cx="610.000" cy="362.720" r="3.5" fill="#2ca02c"/>
    <circle cx="745.000" cy="250.059" r="3.5" fill="#2ca02c"/>
    <circle cx="880.000" cy="71.997" r="3.5" fill="#2ca02c"/>
  </g>

  <!-- Legend -->
  <g font-family="system-ui, -apple-system, Segoe UI, sans-serif" font-size="12">
    <rect x="580" y="82" width="290" height="62" fill="#ffffff" stroke="#dddddd"/>
    <line x1="594" y1="98" x2="630" y2="98" stroke="#1f77b4" stroke-width="2.5"/>
    <text x="640" y="102" fill="#111111">torch-ivf (ROCm GPU, matrix)</text>
    <line x1="594" y1="116" x2="630" y2="116" stroke="#d00000" stroke-width="2.5"/>
    <text x="640" y="120" fill="#111111">torch-ivf (ROCm GPU, csr)</text>
    <line x1="594" y1="134" x2="630" y2="134" stroke="#2ca02c" stroke-width="2.5"/>
    <text x="640" y="138" fill="#111111">torch-ivf (ROCm GPU, auto)</text>
  </g>
</svg>
