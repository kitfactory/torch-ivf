<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" width="900" height="520" viewBox="0 0 900 520">
  <rect x="0" y="0" width="900" height="520" fill="#ffffff"/>

  <!-- Title -->
  <text x="450" y="30" text-anchor="middle" font-family="system-ui, -apple-system, Segoe UI, sans-serif" font-size="18" fill="#111111">
    QPS vs nq (ROCm GPU: torch-ivf matrix/csr/auto)
  </text>
  <text x="450" y="52" text-anchor="middle" font-family="system-ui, -apple-system, Segoe UI, sans-serif" font-size="12" fill="#444444">
    nb=262144, train_n=20480, nlist=512, nprobe=32, k=20, float32 (median)
  </text>

  <!-- Plot area -->
  <rect x="70" y="70" width="810" height="380" fill="#ffffff" stroke="#cccccc" stroke-width="1"/>

  <!-- Grid + Y ticks (0..60000 step 10000) -->
  <!-- y = 70 + (1 - v/60000) * 380 -->
  <g font-family="system-ui, -apple-system, Segoe UI, sans-serif" font-size="12" fill="#333333">
    <line x1="70" y1="70.000" x2="880" y2="70.000" stroke="#eeeeee" stroke-width="1"/>
    <text x="62" y="74.000" text-anchor="end">60000</text>
    <line x1="70" y1="133.333" x2="880" y2="133.333" stroke="#eeeeee" stroke-width="1"/>
    <text x="62" y="137.333" text-anchor="end">50000</text>
    <line x1="70" y1="196.667" x2="880" y2="196.667" stroke="#eeeeee" stroke-width="1"/>
    <text x="62" y="200.667" text-anchor="end">40000</text>
    <line x1="70" y1="260.000" x2="880" y2="260.000" stroke="#eeeeee" stroke-width="1"/>
    <text x="62" y="264.000" text-anchor="end">30000</text>
    <line x1="70" y1="323.333" x2="880" y2="323.333" stroke="#eeeeee" stroke-width="1"/>
    <text x="62" y="327.333" text-anchor="end">20000</text>
    <line x1="70" y1="386.667" x2="880" y2="386.667" stroke="#eeeeee" stroke-width="1"/>
    <text x="62" y="390.667" text-anchor="end">10000</text>
    <line x1="70" y1="450.000" x2="880" y2="450.000" stroke="#eeeeee" stroke-width="1"/>
    <text x="62" y="454.000" text-anchor="end">0</text>
  </g>

  <!-- X ticks (even spacing for nq list indices) -->
  <!-- x positions: 70 + i*(810/6) -->
  <g font-family="system-ui, -apple-system, Segoe UI, sans-serif" font-size="12" fill="#333333">
    <line x1="70.000" y1="450" x2="70.000" y2="456" stroke="#666666"/>
    <text x="70.000" y="476" text-anchor="middle">1</text>
    <line x1="205.000" y1="450" x2="205.000" y2="456" stroke="#666666"/>
    <text x="205.000" y="476" text-anchor="middle">8</text>
    <line x1="340.000" y1="450" x2="340.000" y2="456" stroke="#666666"/>
    <text x="340.000" y="476" text-anchor="middle">32</text>
    <line x1="475.000" y1="450" x2="475.000" y2="456" stroke="#666666"/>
    <text x="475.000" y="476" text-anchor="middle">128</text>
    <line x1="610.000" y1="450" x2="610.000" y2="456" stroke="#666666"/>
    <text x="610.000" y="476" text-anchor="middle">512</text>
    <line x1="745.000" y1="450" x2="745.000" y2="456" stroke="#666666"/>
    <text x="745.000" y="476" text-anchor="middle">2048</text>
    <line x1="880.000" y1="450" x2="880.000" y2="456" stroke="#666666"/>
    <text x="880.000" y="476" text-anchor="middle">19600</text>
  </g>

  <!-- Axis labels -->
  <text x="475" y="510" text-anchor="middle" font-family="system-ui, -apple-system, Segoe UI, sans-serif" font-size="13" fill="#111111">nq</text>
  <text x="18" y="260" text-anchor="middle" font-family="system-ui, -apple-system, Segoe UI, sans-serif" font-size="13" fill="#111111" transform="rotate(-90 18 260)">QPS</text>

  <!-- Data -->
  <!-- torch-ivf matrix (#1f77b4): [742.115, 2507.601, 2917.047, 3318.142, 3427.615, 3513.503, 3530.266] -->
  <!-- torch-ivf csr (#d00000): [1000.5, 2464.344, 1484.037, 5363.526, 17986.054, 32913.345, 52693.597] -->
  <!-- torch-ivf auto (#2ca02c): [991.572, 2566.241, 3033.319, 5089.018, 18653.182, 32485.609, 52449.723] -->
  <!-- y = 70 + (1 - v/60000) * 380 -->

  <!-- Lines -->
  <polyline fill="none" stroke="#1f77b4" stroke-width="2.5"
    points="
      70.000,445.300
      205.000,434.119
      340.000,431.525
      475.000,428.985
      610.000,428.292
      745.000,427.748
      880.000,427.642
    "/>
  <polyline fill="none" stroke="#d00000" stroke-width="2.5"
    points="
      70.000,443.663
      205.000,434.392
      340.000,440.601
      475.000,416.031
      610.000,336.088
      745.000,241.549
      880.000,116.274
    "/>
  <polyline fill="none" stroke="#2ca02c" stroke-width="2.5"
    points="
      70.000,443.720
      205.000,433.747
      340.000,430.789
      475.000,417.770
      610.000,331.863
      745.000,244.258
      880.000,117.818
    "/>

  <!-- Markers -->
  <g>
    <circle cx="70.000" cy="445.300" r="3.5" fill="#1f77b4"/>
    <circle cx="205.000" cy="434.119" r="3.5" fill="#1f77b4"/>
    <circle cx="340.000" cy="431.525" r="3.5" fill="#1f77b4"/>
    <circle cx="475.000" cy="428.985" r="3.5" fill="#1f77b4"/>
    <circle cx="610.000" cy="428.292" r="3.5" fill="#1f77b4"/>
    <circle cx="745.000" cy="427.748" r="3.5" fill="#1f77b4"/>
    <circle cx="880.000" cy="427.642" r="3.5" fill="#1f77b4"/>
    <circle cx="70.000" cy="443.663" r="3.5" fill="#d00000"/>
    <circle cx="205.000" cy="434.392" r="3.5" fill="#d00000"/>
    <circle cx="340.000" cy="440.601" r="3.5" fill="#d00000"/>
    <circle cx="475.000" cy="416.031" r="3.5" fill="#d00000"/>
    <circle cx="610.000" cy="336.088" r="3.5" fill="#d00000"/>
    <circle cx="745.000" cy="241.549" r="3.5" fill="#d00000"/>
    <circle cx="880.000" cy="116.274" r="3.5" fill="#d00000"/>
    <circle cx="70.000" cy="443.720" r="3.5" fill="#2ca02c"/>
    <circle cx="205.000" cy="433.747" r="3.5" fill="#2ca02c"/>
    <circle cx="340.000" cy="430.789" r="3.5" fill="#2ca02c"/>
    <circle cx="475.000" cy="417.770" r="3.5" fill="#2ca02c"/>
    <circle cx="610.000" cy="331.863" r="3.5" fill="#2ca02c"/>
    <circle cx="745.000" cy="244.258" r="3.5" fill="#2ca02c"/>
    <circle cx="880.000" cy="117.818" r="3.5" fill="#2ca02c"/>
  </g>

  <!-- Legend -->
  <g font-family="system-ui, -apple-system, Segoe UI, sans-serif" font-size="12">
    <rect x="580" y="82" width="290" height="62" fill="#ffffff" stroke="#dddddd"/>
    <line x1="594" y1="98" x2="630" y2="98" stroke="#1f77b4" stroke-width="2.5"/>
    <text x="640" y="102" fill="#111111">torch-ivf (ROCm GPU, matrix)</text>
    <line x1="594" y1="116" x2="630" y2="116" stroke="#d00000" stroke-width="2.5"/>
    <text x="640" y="120" fill="#111111">torch-ivf (ROCm GPU, csr)</text>
    <line x1="594" y1="134" x2="630" y2="134" stroke="#2ca02c" stroke-width="2.5"/>
    <text x="640" y="138" fill="#111111">torch-ivf (ROCm GPU, auto)</text>
  </g>
</svg>
