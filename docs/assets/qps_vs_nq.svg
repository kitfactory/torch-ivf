<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" width="900" height="520" viewBox="0 0 900 520">
  <rect x="0" y="0" width="900" height="520" fill="#ffffff"/>

  <!-- Title -->
  <text x="450" y="30" text-anchor="middle" font-family="system-ui, -apple-system, Segoe UI, sans-serif" font-size="18" fill="#111111">
    QPS vs nq (ROCm GPU: torch-ivf csr / CPU: faiss-cpu)
  </text>
  <text x="450" y="52" text-anchor="middle" font-family="system-ui, -apple-system, Segoe UI, sans-serif" font-size="12" fill="#444444">
    nb=262144, train_n=20480, nlist=512, nprobe=32, k=20, float32 (median)
  </text>

  <!-- Plot area -->
  <!-- margins: left=70 right=20 top=70 bottom=70 -->
  <rect x="70" y="70" width="810" height="380" fill="#ffffff" stroke="#cccccc" stroke-width="1"/>

  <!-- Grid + Y ticks (0..60000 step 10000) -->
  <!-- y = 70 + (1 - v/60000) * 380 -->
  <g font-family="system-ui, -apple-system, Segoe UI, sans-serif" font-size="12" fill="#333333">
    <!-- 60000 -->
    <line x1="70" y1="70" x2="880" y2="70" stroke="#eeeeee" stroke-width="1"/>
    <text x="62" y="74" text-anchor="end">60000</text>
    <!-- 50000 -->
    <line x1="70" y1="133.333" x2="880" y2="133.333" stroke="#eeeeee" stroke-width="1"/>
    <text x="62" y="137.333" text-anchor="end">50000</text>
    <!-- 40000 -->
    <line x1="70" y1="196.667" x2="880" y2="196.667" stroke="#eeeeee" stroke-width="1"/>
    <text x="62" y="200.667" text-anchor="end">40000</text>
    <!-- 30000 -->
    <line x1="70" y1="260" x2="880" y2="260" stroke="#eeeeee" stroke-width="1"/>
    <text x="62" y="264" text-anchor="end">30000</text>
    <!-- 20000 -->
    <line x1="70" y1="323.333" x2="880" y2="323.333" stroke="#eeeeee" stroke-width="1"/>
    <text x="62" y="327.333" text-anchor="end">20000</text>
    <!-- 10000 -->
    <line x1="70" y1="386.667" x2="880" y2="386.667" stroke="#eeeeee" stroke-width="1"/>
    <text x="62" y="390.667" text-anchor="end">10000</text>
    <!-- 0 -->
    <line x1="70" y1="450" x2="880" y2="450" stroke="#eeeeee" stroke-width="1"/>
    <text x="62" y="454" text-anchor="end">0</text>
  </g>

  <!-- X ticks (even spacing for nq list indices) -->
  <!-- x positions: 70 + i*(810/6) -->
  <g font-family="system-ui, -apple-system, Segoe UI, sans-serif" font-size="12" fill="#333333">
    <line x1="70" y1="450" x2="70" y2="456" stroke="#666666"/>
    <text x="70" y="476" text-anchor="middle">1</text>

    <line x1="205" y1="450" x2="205" y2="456" stroke="#666666"/>
    <text x="205" y="476" text-anchor="middle">8</text>

    <line x1="340" y1="450" x2="340" y2="456" stroke="#666666"/>
    <text x="340" y="476" text-anchor="middle">32</text>

    <line x1="475" y1="450" x2="475" y2="456" stroke="#666666"/>
    <text x="475" y="476" text-anchor="middle">128</text>

    <line x1="610" y1="450" x2="610" y2="456" stroke="#666666"/>
    <text x="610" y="476" text-anchor="middle">512</text>

    <line x1="745" y1="450" x2="745" y2="456" stroke="#666666"/>
    <text x="745" y="476" text-anchor="middle">2048</text>

    <line x1="880" y1="450" x2="880" y2="456" stroke="#666666"/>
    <text x="880" y="476" text-anchor="middle">19600</text>
  </g>

  <!-- Axis labels -->
  <text x="475" y="510" text-anchor="middle" font-family="system-ui, -apple-system, Segoe UI, sans-serif" font-size="13" fill="#111111">nq</text>
  <text x="18" y="260" text-anchor="middle" font-family="system-ui, -apple-system, Segoe UI, sans-serif" font-size="13" fill="#111111" transform="rotate(-90 18 260)">QPS</text>

  <!-- Data -->
  <!-- torch-ivf csr (red): [275, 576, 1682, 5063, 17656, 29553, 47302] -->
  <!-- faiss-cpu (black): [2241, 3628, 3767, 4887, 7140, 8264, 9962] -->
  <!-- y = 70 + (1 - v/60000) * 380 -->

  <!-- Lines -->
  <polyline fill="none" stroke="#d00000" stroke-width="2.5"
    points="
      70,448.258
      205,446.352
      340,439.347
      475,417.941
      610,338.775
      745,262.165
      880,150.419
    "/>
  <polyline fill="none" stroke="#111111" stroke-width="2.5"
    points="
      70,435.806
      205,427.026
      340,426.146
      475,419.047
      610,404.780
      745,397.653
      880,386.919
    "/>

  <!-- Markers -->
  <g>
    <circle cx="70" cy="448.258" r="3.5" fill="#d00000"/>
    <circle cx="205" cy="446.352" r="3.5" fill="#d00000"/>
    <circle cx="340" cy="439.347" r="3.5" fill="#d00000"/>
    <circle cx="475" cy="417.941" r="3.5" fill="#d00000"/>
    <circle cx="610" cy="338.775" r="3.5" fill="#d00000"/>
    <circle cx="745" cy="262.165" r="3.5" fill="#d00000"/>
    <circle cx="880" cy="150.419" r="3.5" fill="#d00000"/>

    <circle cx="70" cy="435.806" r="3.5" fill="#111111"/>
    <circle cx="205" cy="427.026" r="3.5" fill="#111111"/>
    <circle cx="340" cy="426.146" r="3.5" fill="#111111"/>
    <circle cx="475" cy="419.047" r="3.5" fill="#111111"/>
    <circle cx="610" cy="404.780" r="3.5" fill="#111111"/>
    <circle cx="745" cy="397.653" r="3.5" fill="#111111"/>
    <circle cx="880" cy="386.919" r="3.5" fill="#111111"/>
  </g>

  <!-- Legend -->
  <g font-family="system-ui, -apple-system, Segoe UI, sans-serif" font-size="12">
    <rect x="610" y="82" width="260" height="44" fill="#ffffff" stroke="#dddddd"/>
    <line x1="624" y1="98" x2="660" y2="98" stroke="#d00000" stroke-width="2.5"/>
    <text x="670" y="102" fill="#111111">torch-ivf (ROCm GPU, csr)</text>
    <line x1="624" y1="116" x2="660" y2="116" stroke="#111111" stroke-width="2.5"/>
    <text x="670" y="120" fill="#111111">faiss-cpu (CPU)</text>
  </g>
</svg>
