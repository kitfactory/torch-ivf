# AGENTS (共通テンプレート)
プロジェクト固有の情報は `docs/`（concept/spec/architecture など）で管理してください。この AGENTS.md 自体には固有情報を書きません。
該当ドキュメントが無い場合は `docs/concept.md`, `docs/spec.md`, `docs/architecture.md` を作成してください。
作業前に必ずドキュメントを参照し、機密情報は記載しないでください。

## ドキュメント/コメント作成ルール
- AGENTS.md が日本語の場合、`docs/concept.md` / `docs/spec.md` / `docs/architecture.md` / `docs/plan.md` は必ず日本語で作成する。
- AGENTS.md が日本語の場合、ソースコードのコメントは日本語と英語を併記する。
- concept: 機能一覧を表にまとめ、各機能の詳細と依存関係、MVP とフェーズ分けを明確にする（フェーズ単位で spec/architecture/plan を用意）。機能行には Spec ID を付与し、spec 側で同じ ID を引用できるようにする。concept 作成時点で必ずユーザーと合意し、更新時も確認を徹底する。
- spec: concept の機能グループごとに章を分け、各仕様に番号を振って 前提/条件/振る舞い（Given/When/Then）形式で記載する。仕様タイトルは「4.1. --dir を指定した場合、ディレクトリを再帰的に作成する」のように、何をしたときにどう振る舞うかを明記し、対応する Spec ID を併記する。入力バリデーションやエラー時の振る舞いも番号付きで整理し、エラー/メッセージは専用の一覧表で管理する。
- architecture: レイヤー責務と依存方向を示し、主要インターフェース（I/F）を関数シグネチャ等で明文化する。API は最小粒度・最小引数、データ属性は必要最小限にし、ゴッド API/データを禁止する。非機能は AI 生成で過剰に固定しないが、ログ/エラー方針（例: `[bon][E1] ...`）は明示する。
- サンプル/スニペット: AGENTS.md に最低限の例を含める（正常系と失敗例を 1 行ずつ。例: 成功 `bon --dir ./project --lang ts --editor cursor` → `.cursorrules`、失敗 `bon --editor unknown` → `[bon][E2] Unsupported editor: ...`）。サンプルのメッセージには必ず Error ID を入れ、実装が返す文言と完全一致させる。

## 要件定義
- 想定ユーザーと困りごとを明確化
- 必要なユースケース/機能一覧
- 使用するライブラリ
- ソフトウェア全体設計の概要

## 仕様記述
- 仕様/要求仕様は 前提/条件/振る舞い で記載する

## 設計
- レイヤー構造と単一責務を徹底する
- 抽象クラスで境界を定義し、DI しやすくする
- ゴッドクラスや雑多なヘルパーは作らず、シンプルなインターフェースを提供する

## テスト方針
- 機能/レイヤー単位でテストを完成させる
- モックは補助。本番経路（実通信・実接続）が通ったときに完了扱い
- 必要な環境変数・接続情報・`.env` の配置場所と設定例をここに記載（`.env.sample` は生成しない）
- テストが難航したらステップごとにデバッグメッセージを追加する

## 言語別指針 (Python)
- Python: `uv` + `.venv` 仮想環境、`pytest`、Lint/Format（`ruff`/`black` など）を推奨。
- 環境変数/`.env` の必要キーと利用箇所を明示し、`.env.sample` は生成しないでください。

## 対応エディタ
- ターゲット: Codex
- 他のエディタ指定時は CLI オプション `--editor` を使用

## 作業の進め方
- まず `docs/concept.md`, `docs/spec.md`, `docs/architecture.md` を読む（無ければ作成する）
- `docs/plan.md` にチェックリストを置き、項目をチェックしながら進める
- 上記を踏まえて要件定義→仕様→設計→実装→テストの順に進める
- 機密情報を記載しない。必要なら環境変数経由で扱う